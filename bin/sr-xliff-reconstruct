#!/usr/bin/env node

var fs = require('fs'),
    xliffReconstruct = require('..').xliffReconstruct,
    args = process.argv;

if (args.length < 4) {
    console.log('USAGE:\nxliffReconstruct path/to/yaml path/to/xliff path/to/skeleton path/to/target.md');
    process.exit(1);
}

var yaml = fs.readFileSync(args[2], 'utf8'),
    xliff = fs.readFileSync(args[3], 'utf8'),
    skeleton = fs.readFileSync(args[4], 'utf8'),
    targetMd = args[5];

xliffReconstruct(xliff, skeleton, function(err, md) {
    if (err) throw new Error(err);

    fs.writeFileSync(targetMd, yaml + "\n---\n" + md);
});
